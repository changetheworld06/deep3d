<!DOCTYPE html>
<html lang="fr">
  <head>

    <meta charset="UTF-8">
    <title>Deep3D â€“ Tests 3D, STL, Guides & Inspirations Makers</title>
    <meta name="description" content="Deep3D â€“ Tests, projets et inspirations autour de l'impression 3D. DÃ©couvrez nos articles, sÃ©lections de fichiers STL, et guides pour makers.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Deep3D">
    <meta name="robots" content="index, follow">
    <meta name="keywords" content="impression 3D, fichiers STL, projets 3D, tests imprimantes, guides makers, Deep3D, DIY, fabrication numÃ©rique">
    <meta name="google-adsense-account" content="ca-pub-2161270640127476">
  
    <!-- Open Graph pour Facebook & rÃ©seaux sociaux -->
    <meta property="og:title" content="Deep3D â€“ Tests & projets 3D, fichiers STL, guides & inspirations pour makers">
    <meta property="og:description" content="DÃ©couvrez nos tests, projets d'impression 3D, fichiers STL et guides pratiques.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.deep3d.fr/"> <!-- Remplace par ton URL rÃ©elle -->
    <meta property="og:image" content="{{ url_for('static', filename='images/og-image.jpg') }}"> <!-- Image de partage -->
  
    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Deep3D â€“ Tests & projets 3D, fichiers STL, guides & inspirations pour makers">
    <meta name="twitter:description" content="Tests d'imprimantes 3D, fichiers STL, guides pour makers.">
    <meta name="twitter:image" content="{{ url_for('static', filename='images/og-image.jpg') }}">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' https://pagead2.googlesyndication.com https://tpc.googlesyndication.com https://www.googletagmanager.com https://www.google-analytics.com 'unsafe-inline' 'unsafe-eval';
    style-src 'self' https://fonts.googleapis.com 'unsafe-inline';
    font-src https://fonts.gstatic.com;
    img-src 'self' data: https: https://tpc.googlesyndication.com;
    connect-src https://www.google-analytics.com https://pagead2.googlesyndication.com;
    frame-src https://*.doubleclick.net https://*.googlesyndication.com;
  ">
  
    <!-- Favicon et icÃ´nes -->
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/apple-touch-icon.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}"> <!-- Pour PWA Ã©ventuelle -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
    <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
  
    <!-- Canonical URL -->
    <link rel="canonical" href="https://deep3d.fr/"> <!-- Remplace par ton URL exacte -->
  
    <!-- Feuille de style -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  
<!-- Cookie Consent (RGPD) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js"></script>

<style>
  .cc-window {
    max-width: 600px !important;
    width: 90% !important;
    left: 50% !important;
    top: 50% !important;
    transform: translate(-50%, -50%) !important;
    position: fixed !important;
    z-index: 10000 !important;
    background-color: rgba(130, 34, 34, 0.5) !important;
    backdrop-filter: blur(4px);
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.5) !important;
    text-align: center;
  }

  .cc-btn.cc-allow {
    background-color: #f1d600 !important;
    color: #000 !important;
    font-weight: bold;
    padding: 10px 20px;
    border-radius: 4px;
    margin: 5px;
  }

  .cc-link {
    color: #f1d600 !important;
    text-decoration: underline;
    cursor: pointer;
    display: inline-block;
    margin-top: 10px;
  }
</style>

<script>
  window.addEventListener("load", function () {
    if (!window.cookieconsent) return;

    cookieconsent.initialise({
      palette: {
        popup: { background: "#000" },
        button: { background: "#f1d600", text: "#000" }
      },
      theme: "classic",
      type: "opt-in",
      layout: "basic",
      content: {
        message: "Ce site utilise des cookies pour mesurer lâ€™audience et afficher de la publicitÃ© personnalisÃ©e.",
        allow: "Accepter",
        link: "Modifier mes choix",
        href: "#"
      },

      onInitialise: function (status) {
        if (status === cookieconsent.status.allow) loadConsentScripts();
      },

      onStatusChange: function (status) {
        if (status === cookieconsent.status.allow) {
          loadConsentScripts();
        } else {
          clearCookies();
        }
      },

      onPopupOpen: function () {
        const popup = document.querySelector(".cc-window");
        if (popup) {
          popup.setAttribute("role", "dialog");
          popup.setAttribute("aria-modal", "true");
        }

        const link = document.querySelector(".cc-link");
        if (link) {
          link.addEventListener("click", function (e) {
            e.preventDefault();
            cookieconsent.show();
          });
        }
      }
    });

    function loadConsentScripts() {
      // Google Analytics
      const ga = document.createElement("script");
      ga.src = "https://www.googletagmanager.com/gtag/js?id=G-LHVQ0VS1FQ";
      ga.async = true;
      document.head.appendChild(ga);

      const gtag = document.createElement("script");
      gtag.innerHTML = `
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-LHVQ0VS1FQ');
      `;
      document.head.appendChild(gtag);

      // Google AdSense
      const ads = document.createElement("script");
      ads.async = true;
      ads.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2161270640127476";
      ads.crossOrigin = "anonymous";
      document.head.appendChild(ads);
    }

    function clearCookies() {
      console.log("Cookies refusÃ©s.");
      document.cookie = "_ga=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
      document.cookie = "_gid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
      localStorage.removeItem("cookiesAccepted");
    }
  });
</script>
  </head>

<body>

<header>
  <div class="header-container">
    <a href="/" class="logo-link" aria-label="Accueil">
      <img src="{{ url_for('static', filename='images/logo.png') }}" class="logo" alt="Logo Deep3D">
    </a>
    <nav class="navbar-links" role="navigation" aria-label="Menu principal">
      <a href="/">Accueil</a>
      <a href="/articles">Articles</a>
      <a href="/impressions">Impressions 3D</a>
      <a href="/tests">Tests</a>
      <a href="{{ url_for('news') }}">News</a>
      <a href="{{ url_for('guide') }}">Guide</a>
    </nav>
  </div>
</header>

<main>
  {% block content %}{% endblock %}
</main>

<footer>
  <p>&copy; {{ current_year }} Deep3D â€“ Tous droits rÃ©servÃ©s.</p>
  <p><a href="/mentions-legales">Mentions lÃ©gales</a> â€“ <a href="/confidentialite">Politique de confidentialitÃ©</a></p>
  <p style="font-size: 0.9em; color: #888;">
    Site conÃ§u avec ðŸ’¡ par <a href="https://vitrineboost.fr" target="_blank" rel="noopener noreferrer">VitrineBoost.fr</a>
  </p>
</footer>

<script src="{{ url_for('static', filename='js/interactions.js') }}" defer></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    fetch("/likes")
      .then(res => res.json())
      .then(data => {
        document.querySelectorAll(".like-btn").forEach(btn => {
          const projet = btn.dataset.projet;
          const countSpan = btn.querySelector(".like-count");
          countSpan.innerText = data[projet] ?? 0;

          if (localStorage.getItem("liked-" + projet) === "true") {
            btn.classList.add("liked");
          }

          btn.addEventListener("click", () => {
            const liked = btn.classList.contains("liked");
            const action = liked ? "unlike" : "like";

            fetch("/like/" + projet, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ action })
            })
            .then(res => res.json())
            .then(data => {
              countSpan.innerText = data.likes;
              btn.classList.toggle("liked");
              localStorage.setItem("liked-" + projet, !liked);
            });
          });
        });
      });

    document.querySelectorAll(".share-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        const url = btn.dataset.url;
        navigator.clipboard.writeText(url).then(() => {
          btn.textContent = "âœ… Lien copiÃ© !";
          setTimeout(() => {
            btn.textContent = "ðŸ“¤ Partager";
          }, 2000);
        });
      });
    });
  });
</script>

</body>
</html>