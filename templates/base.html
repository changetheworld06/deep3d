<!DOCTYPE html>
<html lang="fr">
  <head>

    <meta charset="UTF-8">
    <title>Deep3D ‚Äì Tests 3D, STL, Guides & Inspirations Makers</title>
    <meta name="description" content="Deep3D ‚Äì Tests, projets et inspirations autour de l'impression 3D. D√©couvrez nos articles, s√©lections de fichiers STL, et guides pour makers.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Deep3D">
    <meta name="robots" content="index, follow">
    <meta name="keywords" content="impression 3D, fichiers STL, projets 3D, tests imprimantes, guides makers, Deep3D, DIY, fabrication num√©rique">
    <meta name="google-adsense-account" content="ca-pub-2161270640127476">
  
    <!-- Open Graph pour Facebook & r√©seaux sociaux -->
    <meta property="og:title" content="Deep3D ‚Äì Tests & projets 3D, fichiers STL, guides & inspirations pour makers">
    <meta property="og:description" content="D√©couvrez nos tests, projets d'impression 3D, fichiers STL et guides pratiques.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.deep3d.fr/"> <!-- Remplace par ton URL r√©elle -->
    <meta property="og:image" content="{{ url_for('static', filename='images/og-image.jpg') }}"> <!-- Image de partage -->
  
    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Deep3D ‚Äì Tests & projets 3D, fichiers STL, guides & inspirations pour makers">
    <meta name="twitter:description" content="Tests d'imprimantes 3D, fichiers STL, guides pour makers.">
    <meta name="twitter:image" content="{{ url_for('static', filename='images/og-image.jpg') }}">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
    <!-- Favicon et ic√¥nes -->
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/apple-touch-icon.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}"> <!-- Pour PWA √©ventuelle -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
    <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
  
    <!-- Canonical URL -->
    <link rel="canonical" href="https://deep3d.fr/"> <!-- Remplace par ton URL exacte -->
  
    <!-- Feuille de style -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="canonical" href="https://deep3d.fr/">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
  
    <style>
      .cc-window {
        z-index: 10001 !important;
      }
      .cc-btn.cc-allow, .cc-btn.cc-deny {
        display: inline-block !important;
        min-width: 120px;
        margin: 8px;
        font-size: 1em;
      }
      #consent-overlay {
        position: fixed;
        top: 0; left: 0; width: 100vw; height: 100vh;
        background: rgba(0, 0, 0, 0.7);
        color: white; z-index: 10000;
        display: none;
        align-items: center; justify-content: center; text-align: center;
        padding: 2rem; font-size: 1.2rem; backdrop-filter: blur(4px);
      }
      #consent-overlay.show { display: flex; }
      #consent-overlay .overlay-content {
        max-width: 420px;
        margin: auto;
        background: rgba(30,30,30,0.85);
        padding: 32px 18px 18px 18px;
        border-radius: 16px;
        box-shadow: 0 2px 20px rgba(0,0,0,0.3);
      }
      #retry-cookie {
        margin-top: 22px;
        background: #f1d600;
        color: #000;
        border: none;
        border-radius: 6px;
        font-weight: bold;
        padding: 14px 28px;
        cursor: pointer;
        font-size: 1em;
        transition: background 0.2s;
      }
      #retry-cookie:hover {
        background: #ffe144;
      }
      @media (max-width: 600px) {
        #consent-overlay .overlay-content { padding: 18px 8px; }
      }

      /* Styles robustes pour garantir la visibilit√© des boutons CookieConsent */
.cc-btn, .cc-btn.cc-allow, .cc-btn.cc-deny {
  color: #000 !important;
  font-size: 1em !important;
  text-indent: 0 !important;
  text-shadow: none !important;
  letter-spacing: normal !important;
  word-spacing: normal !important;
  background: none !important; /* Le background color est d√©j√† d√©fini */
  opacity: 1 !important;
  border: none;
}

.cc-btn.cc-allow { background: #f1d600 !important; }
.cc-btn.cc-deny  { background: #bbb !important; }

.cc-btn span, .cc-btn * {
  color: #000 !important;
  text-indent: 0 !important;
}
    </style>
   <script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js"></script>
   <script>
     let ccInstance = null;
   
     function loadConsentScripts() {
       // Google Analytics & AdSense (comme plus haut)
       if (!window._ga_loaded) {
         const ga = document.createElement("script");
         ga.src = "https://www.googletagmanager.com/gtag/js?id=G-LHVQ0VS1FQ";
         ga.async = true;
         document.head.appendChild(ga);
         const gtag = document.createElement("script");
         gtag.innerHTML = `
           window.dataLayer = window.dataLayer || [];
           function gtag(){dataLayer.push(arguments);}
           gtag('js', new Date());
           gtag('config', 'G-LHVQ0VS1FQ');
         `;
         document.head.appendChild(gtag);
         window._ga_loaded = true;
       }
       if (!window._adsense_loaded) {
         const ads = document.createElement("script");
         ads.async = true;
         ads.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2161270640127476";
         ads.crossOrigin = "anonymous";
         document.head.appendChild(ads);
         window._adsense_loaded = true;
       }
     }
     function clearCookies() {
       document.cookie = "_ga=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
       document.cookie = "_gid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
       localStorage.removeItem("cookiesAccepted");
     }
     function showOverlay(show) {
       const overlay = document.getElementById("consent-overlay");
       if (overlay) {
         if (show) overlay.classList.add("show");
         else overlay.classList.remove("show");
       }
     }
   
     // Initialisation CookieConsent + attachement du bouton (le BON moment)
     window.addEventListener("load", function () {
       ccInstance = window.cookieconsent.initialise({
         palette: {
           popup: { background: "#000" },
           button: { background: "#f1d600", text: "#000" }
         },
         theme: "classic",
         type: "opt-in",
         layout: "basic",
         content: {
           message: "Ce site utilise des cookies pour mesurer l‚Äôaudience et afficher des publicit√©s personnalis√©es.",
           allow: "Accepter",
           deny: "Refuser",
           link: "En savoir plus",
           href: "/confidentialite"
         },
         onInitialise: function () {
           if (this.hasConsented()) {
             loadConsentScripts();
             showOverlay(false);
           } else if (this.hasAnswered() && !this.hasConsented()) {
             showOverlay(true); // Affiche le filtre si refus
           } else {
             showOverlay(false);
           }
           // ‚¨áÔ∏è Attache ici apr√®s instanciation garantie
           document.getElementById("retry-cookie").onclick = () => {
             if (typeof this.open === "function") this.open();
           };
         },
         onStatusChange: function () {
           if (this.hasConsented()) {
             loadConsentScripts();
             showOverlay(false);
           } else if (this.hasAnswered() && !this.hasConsented()) {
             clearCookies();
             showOverlay(true);
           } else {
             showOverlay(false);
           }
         },
         onPopupOpen: function () {
           showOverlay(false);
         }
       });
     });
   </script>
  </head>
  <body>
    <!-- Overlay RGPD affich√© SI refus -->
    <div id="consent-overlay">
      <div class="overlay-content">
        <p>
          <strong>Vous avez refus√© les cookies.</strong><br>
          Ce site n√©cessite votre consentement pour fonctionner correctement et afficher des publicit√©s personnalis√©es.
        </p>
        <button id="retry-cookie">Pr√©f√©rences cookies</button>
      </div>
    </div>
  
    <header>
      <div class="header-container">
        <a href="/" class="logo-link" aria-label="Accueil">
          <img src="{{ url_for('static', filename='images/logo.png') }}" class="logo" alt="Logo Deep3D">
        </a>
        <nav class="navbar-links" role="navigation" aria-label="Menu principal">
          <a href="/">Accueil</a>
          <a href="/articles">Articles</a>
          <a href="/impressions">Impressions 3D</a>
          <a href="/tests">Tests</a>
          <a href="{{ url_for('news') }}">News</a>
          <a href="{{ url_for('guide') }}">Guide</a>
        </nav>
      </div>
    </header>
  
    <main>
      {% block content %}{% endblock %}
    </main>
  
    <footer>
      <p>&copy; {{ current_year }} Deep3D ‚Äì Tous droits r√©serv√©s.</p>
      <p><a href="/mentions-legales">Mentions l√©gales</a> ‚Äì <a href="/confidentialite">Politique de confidentialit√©</a></p>
      <p style="font-size: 0.9em; color: #888;">
        Site con√ßu avec üí° par <a href="https://vitrineboost.fr" target="_blank" rel="noopener noreferrer">VitrineBoost.fr</a>
      </p>
    </footer>
  
    <script src="{{ url_for('static', filename='js/interactions.js') }}" defer></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        fetch("/likes")
          .then(res => res.json())
          .then(data => {
            document.querySelectorAll(".like-btn").forEach(btn => {
              const projet = btn.dataset.projet;
              const countSpan = btn.querySelector(".like-count");
              countSpan.innerText = data[projet] ?? 0;
  
              if (localStorage.getItem("liked-" + projet) === "true") {
                btn.classList.add("liked");
              }
  
              btn.addEventListener("click", () => {
                const liked = btn.classList.contains("liked");
                const action = liked ? "unlike" : "like";
                fetch("/like/" + projet, {
                  method: "POST",
                  headers: { "Content-Type": "application/json" },
                  body: JSON.stringify({ action })
                })
                .then(res => res.json())
                .then(data => {
                  countSpan.innerText = data.likes;
                  btn.classList.toggle("liked");
                  localStorage.setItem("liked-" + projet, !liked);
                });
              });
            });
          });
  
        document.querySelectorAll(".share-btn").forEach(btn => {
          btn.addEventListener("click", () => {
            const url = btn.dataset.url;
            navigator.clipboard.writeText(url).then(() => {
              btn.textContent = "‚úÖ Lien copi√© !";
              setTimeout(() => {
                btn.textContent = "üì§ Partager";
              }, 2000);
            });
          });
        });
      });
    </script>
  </body>
  </html>